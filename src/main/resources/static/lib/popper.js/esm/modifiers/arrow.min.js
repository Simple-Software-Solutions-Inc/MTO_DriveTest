import getBasePlacement from"../utils/getBasePlacement.js";import getLayoutRect from"../dom-utils/getLayoutRect.js";import contains from"../dom-utils/contains.js";import getOffsetParent from"../dom-utils/getOffsetParent.js";import getMainAxisFromPlacement from"../utils/getMainAxisFromPlacement.js";import within from"../utils/within.js";import mergePaddingObject from"../utils/mergePaddingObject.js";import expandToHashMap from"../utils/expandToHashMap.js";import{left,right,basePlacements,top,bottom}from"../enums.js";import{isHTMLElement}from"../dom-utils/instanceOf.js";function arrow(e){var t,r=e.state,i=e.name,s=r.elements.arrow,a=r.modifiersData.popperOffsets,n=getBasePlacement(r.placement),o=getMainAxisFromPlacement(n),m=[left,right].indexOf(n)>=0?"height":"width";if(s&&a){var f=r.modifiersData[i+"#persistent"].padding,p=getLayoutRect(s),c="y"===o?top:left,l="y"===o?bottom:right,d=r.rects.reference[m]+r.rects.reference[o]-a[o]-r.rects.popper[m],g=a[o]-r.rects.reference[o],u=getOffsetParent(s),h=u?"y"===o?u.clientHeight||0:u.clientWidth||0:0,j=d/2-g/2,P=f[c],O=h-p[m]-f[l],w=h/2-p[m]/2+j,b=within(P,w,O),y=o;r.modifiersData[i]=((t={})[y]=b,t.centerOffset=b-w,t)}}function effect(e){var t=e.state,r=e.options,i=e.name,s=r.element,a=void 0===s?"[data-popper-arrow]":s,n=r.padding,o=void 0===n?0:n;null!=a&&("string"!=typeof a||(a=t.elements.popper.querySelector(a)))&&contains(t.elements.popper,a)&&(o="function"==typeof o?o(Object.assign({},t.rects,{placement:t.placement})):o,t.elements.arrow=a,t.modifiersData[i+"#persistent"]={padding:mergePaddingObject("number"!=typeof o?o:expandToHashMap(o,basePlacements))})}export default{name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};